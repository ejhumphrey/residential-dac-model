<!DOCTYPE html>
<html>
<head>
    <title>Password Hash Generator</title>
</head>
<body>
    <h1>Password Hash Generator</h1>
    <input type="password" id="password" placeholder="Enter password to hash">
    <button onclick="generateHash()">Generate Hash</button>
    <hr>
    <h3>Copy these values into your Astro page script:</h3>
    <pre id="output"></pre>

    <script>
        async function generateHash() {
            const password = document.getElementById('password').value;
            if (!password) { alert('Please enter a password.'); return; }

            const salt = window.crypto.getRandomValues(new Uint8Array(16));
            const encoder = new TextEncoder();
            const keyMaterial = await window.crypto.subtle.importKey(
                'raw', encoder.encode(password), { name: 'PBKDF2' }, false, ['deriveBits']
            );
            const key = await window.crypto.subtle.deriveBits(
                { "name": "PBKDF2", "salt": salt, "iterations": 100000, "hash": "SHA-256" },
                keyMaterial, 256
            );

            const saltHex = Array.from(salt).map(b => b.toString(16).padStart(2, '0')).join('');
            const hashHex = Array.from(new Uint8Array(key)).map(b => b.toString(16).padStart(2, '0')).join('');
            
            document.getElementById('output').textContent = 
`const SALT = "${saltHex}";
const HASH = "${hashHex}";`;
        }
    </script>
</body>
</html>
